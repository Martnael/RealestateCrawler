<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <changeSet id="17.02.2020 v.1" author="Mart">
        <createTable tableName="sale_status">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="status_name" type="text"/>
        </createTable>
    </changeSet>
    <changeSet id="19.02.2020 v.1" author="Mart">
        <createTable tableName="county">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="county_name" type="text"/>
        </createTable>
        <createTable tableName="area">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="area_name" type="text"/>
            <column name="county_id" type="int">
                <constraints foreignKeyName="fk_area_county" references="county(id)"/>
            </column>
        </createTable>
        <createTable tableName="developer">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="developer_name" type="text"/>
        </createTable>
        <createTable tableName="project_status">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="status_name" type="text"/>
        </createTable>
        <createTable tableName="project">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="project_name" type="text"/>
            <column name="developer_id" type="int">
                <constraints foreignKeyName="fk_developer_project" references="developer(id)"/>
            </column>
            <column name="area_id" type="int">
                <constraints foreignKeyName="fk_area_project" references="area(id)"/>
            </column>
            <column name="project_status_id" type="int">
                <constraints foreignKeyName="fk_project_status_project" references="project_status(id)"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="19.02.2020 v.2" author="Mart">
        <createTable tableName="unit_category">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="category_name" type="text"/>
        </createTable>
        <createTable tableName="unit_type">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="unit_name" type="text"/>
        </createTable>
    </changeSet>
    <changeSet id="19.02.2020 v.3" author="Mart">
        <createTable tableName="unit_info">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="unit_number" type="text"/>
            <column name="unit_size" type="numeric"/>
            <column name="unit_balcony_size" type="numeric"/>
            <column name="unit_current_price" type="numeric"/>
            <column name="unit_construction_year" type="numeric"/>
            <column name="unit_scan_date" type="date"/>
            <column name="unit_status_id" type="int">
                <constraints foreignKeyName="fk_sale_status_unit" references="sale_status(id)"/>
            </column>
            <column name="project_id" type="int">
                <constraints foreignKeyName="fk_project_unit" references="project(id)"/>
            </column>
            <column name="unit_category_id" type="int">
                <constraints foreignKeyName="fk_category_unit" references="unit_category(id)"/>
            </column>
            <column name="unit_type_id" type="int">
                <constraints foreignKeyName="fk_type_unit" references="unit_type(id)"/>
            </column>
            <column name="unit_url" type="text"/>
        </createTable>
    </changeSet>
    <changeSet id="19.02.2020 v.4" author="Mart">
        <loadData
                file="db/changelog/county.csv"
                schemaName="public"
                tableName="county">
            <column header="id" name="id" type="skip"/>
            <column header="county_name" name="county_name" type="string"/>
        </loadData>
        <loadData
                file="db/changelog/project_status.csv"
                schemaName="public"
                tableName="project_status">
            <column header="id" name="id" type="skip"/>
            <column header="status_name" name="status_name" type="string"/>
        </loadData>
        <loadData
                file="db/changelog/sale_status.csv"
                schemaName="public"
                tableName="sale_status">
            <column header="id" name="id" type="skip"/>
            <column header="status_name" name="status_name" type="string"/>
        </loadData>
        <loadData
                file="db/changelog/unit_category.csv"
                schemaName="public"
                tableName="unit_category">
            <column header="id" name="id" type="skip"/>
            <column header="category_name" name="category_name" type="string"/>
        </loadData>
    </changeSet>
    <changeSet id="20.02.2021 v.1" author="Mart">
        <addUniqueConstraint tableName="developer" columnNames="developer_name"/>
    </changeSet>
    <changeSet id="21.02.2021 v.1" author="Mart">
        <addUniqueConstraint tableName="area" columnNames="area_name"/>
    </changeSet>
    <changeSet id="23.02.2021 v.1" author="Mart">
        <addUniqueConstraint tableName="county" columnNames="county_name"/>
    </changeSet>
    <changeSet id="23.02.2021 v.2" author="Mart">
        <addColumn tableName="unit_info">
            <column name="unit_rooms" type="int"/>
            <column name="unit_floor" type="int"/>
        </addColumn>
    </changeSet>
</databaseChangeLog>